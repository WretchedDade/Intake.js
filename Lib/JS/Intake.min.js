'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},_get=function e(i,l,m){null===i&&(i=Function.prototype);var n=Object.getOwnPropertyDescriptor(i,l);if(void 0===n){var o=Object.getPrototypeOf(i);return null===o?void 0:e(o,l,m)}if('value'in n)return n.value;var p=n.get;return void 0===p?void 0:p.call(m)},_createClass=function(){function e(i,l){for(var m,n=0;n<l.length;n++)m=l[n],m.enumerable=m.enumerable||!1,m.configurable=!0,'value'in m&&(m.writable=!0),Object.defineProperty(i,m.key,m)}return function(i,l,m){return l&&e(i.prototype,l),m&&e(i,m),i}}();function _possibleConstructorReturn(e,i){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return i&&('object'==('undefined'==typeof i?'undefined':_typeof(i))||'function'==typeof i)?i:e}function _inherits(e,i){if('function'!=typeof i&&null!==i)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof i?'undefined':_typeof(i)));e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError('Cannot call a class as a function')}var Intake=function(){function e(i,l,m,n,o){var p=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;if(_classCallCheck(this,e),this.Container='string'==typeof i?document.querySelector(i):i,this.Container.classList.add('Intake-Container'),this.Container.setAttribute('tabindex',-1),this.Form='string'==typeof l?document.querySelector(l):l,this.HiddenInput='string'==typeof n?document.querySelector(n):n,!o)throw'Options must be provided to generate Intake Object';if(this.Options=o,o instanceof DateIntakeOptions)this.BaseIntake=new DateIntake(this,m);else if(o instanceof PhoneIntakeOptions)this.BaseIntake=new PhoneIntake(this,m);else if(o instanceof ZipCodeIntakeOptions)this.BaseIntake=new ZipCodeIntake(this,m);else throw'Unrecognized options provided';this.Callback=p}return _createClass(e,[{key:'Destroy',value:function(){for(;this.Container.firstChild;)this.Container.removeChild(this.Container.firstChild)}}]),e}(),DateIntakeOptions=function e(i,l){_classCallCheck(this,e),this.Format=i,this.Divider=l},PhoneIntakeOptions=function e(i){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:' ';_classCallCheck(this,e),this.Format=i,this.PlaceHolderCharacter=l.substr(0,1)},ZipCodeIntakeOptions=function e(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,e),this.Country=i,this.IsNumeric=l,this.MaxLength=m},IntakeBase=function(){function e(i,l){if(_classCallCheck(this,e),this.Parent=i,this.GeneratePartGroup(),this.IntakeParts=[],!this.GenerateIntakeParts)throw'BaseIntake.GenerateIntakeParts() not implemented by SubClass';if(this.GenerateIntakeParts(),!this.PopulateFromExistingValue)throw'BaseIntake.PopulateFromExistingValue(value) not implemented by SubClass';this.PopulateFromExistingValue(l),this.GenerateBtnClear();var m=this;this.BtnClear&&(this.BtnClear.onclick=function(){m.Clear()}),this.Parent.Form&&(this.Parent.Form.onsubmit=function(){m.UpdateHiddenInputWithFormattedValue?m.UpdateHiddenInputWithFormattedValue():m.UpdateHiddenInputWithRawValue()}),this.Parent.Container.onblur=function(){m.IntakeParts.forEach(function(n){n instanceof IntakeInput&&(n.TrimToMaxLength(),m.Parent.Callback&&m.Parent.Callback())})}}return _createClass(e,[{key:'GeneratePartGroup',value:function(){var l=document.createElement('div');l.className='Intake-PartGroup',this.PartGroup=l,this.Parent.Container.appendChild(l)}},{key:'GenerateBtnClear',value:function(){var l=document.createElement('i');l.className='fas fa-times-circle Intake-BtnClear',this.BtnClear=l,this.Parent.Container.appendChild(l)}},{key:'Clear',value:function(){this.IntakeParts.forEach(function(l){l instanceof IntakeInput&&l.Clear()})}},{key:'UpdateHiddenInputWithRawValue',value:function(){this.Parent.HiddenInput&&(this.Parent.HiddenInput.value=this.GetRawValue(),this.FireChangeEvent(this.Parent.HiddenInput))}},{key:'FireChangeEvent',value:function(l){if(!document.createEventObject){var m=document.createEvent('HTMLEvents');return m.initEvent('change',!0,!0),!l.dispatchEvent(m)}return l.fireEvent('onchange',document.createEventObject())}},{key:'IsEmpty',value:function(l){return''==l}},{key:'GetRawValue',value:function(){var l='';return this.IntakeParts.forEach(function(m){m instanceof IntakeInput&&(l+=m.Element.value)}),l}}]),e}(),DateIntake=function(e){function i(l,m){return _classCallCheck(this,i),_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,l,m))}return _inherits(i,e),_createClass(i,[{key:'GenerateIntakeParts',value:function(){for(var m=this,n=this.Parent.Options.Divider,o=this.Parent.Options.Format.split(n),p=['paste'],q=0;q<o.length;q++)this.IntakeParts.push(new NumberIntakeInput(this,o[q],p,o[q])),q!=o.length-1&&this.IntakeParts.push(new IntakeDivider(this,n));this.IntakeParts[0].Element.style.marginLeft='2px',this.IntakeParts.forEach(function(s){m.PartGroup.appendChild(s.Element),s.Element.style.textAlign='left',s.Element.style.paddingLeft='4px'});for(var r=0;r<this.IntakeParts.length;r++)this.IntakeParts[r]instanceof IntakeInput&&(r+2<=this.IntakeParts.length&&(this.IntakeParts[r].NextPart=this.IntakeParts[r+2]),0<=r-2&&(this.IntakeParts[r].PreviousPart=this.IntakeParts[r-2]))}},{key:'PopulateFromExistingValue',value:function(m){if(''!=m){var n=[];this.IntakeParts.forEach(function(q){q instanceof IntakeInput&&n.push(q)});var o=m.split(this.Parent.Options.Divider);if(n.length==o.length)for(var p=0;p<n.length;p++)n[p].Element.value=o[p];else if(this.intakeParts.length<o.length);else if(this.intakeParts.length>o.length);this.IntakeParts[0].Element.value=parts[0],this.IntakeParts[2].Element.value=parts[1],this.IntakeParts[4].Element.value=parts[2]}}},{key:'UpdateHiddenInputWithFormattedValue',value:function(){this.Parent.HiddenInput&&(this.Parent.HiddenInput.value=this.GetFormattedValue(),this.FireChangeEvent(this.Parent.HiddenInput))}},{key:'GetFormattedValue',value:function(){var m=[],n=!0;if(this.IntakeParts.forEach(function(p){p instanceof IntakeInput&&(m.push(p.Element.value),n=n&&p.IsComplete())}),n){var o=this.Parent.Options.Divider;return m[0]+o+m[1]+o+m[2]}return''}}]),i}(IntakeBase),PhoneIntake=function(e){function i(l,m){return _classCallCheck(this,i),_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,l,m))}return _inherits(i,e),_createClass(i,[{key:'GenerateIntakeParts',value:function(){var m=this,n=['paste'],o=this.Parent.Options.PlaceHolderCharacter;if('(XXX)XXX-XXXX'===this.Parent.Options.Format)this.IntakeParts.push(new IntakeDivider(this,'(')),this.IntakeParts.push(new NumberIntakeInput(this,o.repeat(3),n)),this.IntakeParts.push(new IntakeDivider(this,')')),this.IntakeParts.push(new NumberIntakeInput(this,o.repeat(3),n)),this.IntakeParts.push(new IntakeDivider(this,'-')),this.IntakeParts.push(new NumberIntakeInput(this,o.repeat(4),n)),this.IntakeParts[1].NextPart=this.IntakeParts[3],this.IntakeParts[3].NextPart=this.IntakeParts[5],this.IntakeParts[3].PreviousPart=this.IntakeParts[1],this.IntakeParts[5].PreviousPart=this.IntakeParts[3];else if('XXX-XXX-XXX'===this.Parent.Options.Format)this.IntakeParts.push(new NumberIntakeInput(this,o.repeat(3),n)),this.IntakeParts.push(new IntakeDivider(this,'-')),this.IntakeParts.push(new NumberIntakeInput(this,o.repeat(3),n)),this.IntakeParts.push(new IntakeDivider(this,'-')),this.IntakeParts.push(new NumberIntakeInput(this,o.repeat(4),n)),this.IntakeParts[0].NextPart=this.IntakeParts[2],this.IntakeParts[2].NextPart=this.IntakeParts[4],this.IntakeParts[2].PreviousPart=this.IntakeParts[0],this.IntakeParts[4].PreviousPart=this.IntakeParts[2];else throw'Invalid format provided with PhoneIntakeOptions.';this.IntakeParts[0].Element.style.marginLeft='2px',this.IntakeParts.forEach(function(p){m.PartGroup.appendChild(p.Element),p.Element.style.textAlign='left'})}},{key:'PopulateFromExistingValue',value:function(m){this.IntakeParts[1].Element.value=m.substr(0,3),this.IntakeParts[3].Element.value=m.substr(3,3),this.IntakeParts[5].Element.value=m.substr(6,4)}}]),i}(IntakeBase),ZipCodeIntake=function(e){function i(l,m){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,l,m));return n.Parent.Container.onclick=function(){n.IntakeParts[0].Element.focus()},n}return _inherits(i,e),_createClass(i,[{key:'GenerateIntakeParts',value:function(){var m,n=this,o=['paste'];if(this.Parent.Options.Country)switch(this.Parent.Options.Country){case'USA':m=new NumberIntakeInput(this,'     ',o);break;case'Canada':m=new TextIntakeInput(this,'      ',o);break;default:throw'Unrecognized Country Provided for ZipCodeIntakeOptions';}else if(!this.Parent.Options.MaxLength)throw'MaxLength must be provided when Country is ommitted from ZipCodeIntakeOptions';else m=this.Parent.Options.IsNumeric?new NumberIntakeInput(this,' '.repeat(this.Parent.Options.MaxLength),o):new TextIntakeInput(this,' '.repeat(this.Parent.Options.MaxLength),o);this.IntakeParts.push(m),this.IntakeParts.forEach(function(p){n.PartGroup.appendChild(p.Element)})}},{key:'PopulateFromExistingValue',value:function(m){this.IntakeParts[0].Element.value=m,this.IntakeParts[0].TrimToMaxLength()}}]),i}(IntakeBase),IntakePartBase=function e(i,l,m){_classCallCheck(this,e),this.Parent=i,this.MaxLength=l,this.Element=document.createElement(m),this.UpdateWidth()},IntakeInput=function(e){function i(l,m,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'text',p=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;_classCallCheck(this,i);var q=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,l,p?p:m.length,'input'));return q.PlaceHolder=m,q.Element.className='Intake-Part',q.Element.setAttribute('placeholder',q.PlaceHolder),q.Element.setAttribute('type',o),q.EventsToPrevent=n,q.InitializeListeners(),q.JustGainedFocus=!1,q}return _inherits(i,e),_createClass(i,[{key:'UpdateWidth',value:function(){this.Element.style.width=this.Element.value&&''!=this.Element.value?7.7*this.Element.value.length+'px':7.7*(this.MaxLength+1)+'px'}},{key:'InitializeListeners',value:function(){var m=this;this.EventsToPrevent.forEach(function(o){m.Element.addEventListener(o,function(p){n.PreventDefault(p)})});var n=this;if(!this.KeyUp)throw'BaseIntakePart.KeyUp(event) not implemented by SubClass';if(!this.KeyDown)throw'BaseIntakePart.KeyDown(event) not implemented by SubClass';this.Element.onkeyup=function(o){n.KeyUp(o)},this.Element.onkeydown=function(o){n.KeyDown(o)},this.Element.onclick=function(){this.focus()},this.Element.onfocus=function(){n.JustGainedFocus=!0},this.Element.onblur=function(){n.TrimToMaxLength(),n.UpdateWidth(),n.Parent.Parent.Callback&&n.Parent.Parent.Callback()}}},{key:'PreventDefault',value:function(m){m.preventDefault()}},{key:'KeyTypeFromEvent',value:function(m){var n=m.which||m.keyCode;if(!m.shiftKey){if(8==n)return'Backspace';if(9==n)return'Tab';if(37==n)return'LeftArrow';if(38==n)return'UpArrow';if(39==n)return'RightArrow';if(40==n)return'DownArrow';if(46==n)return'Delete';if(48<=n&&57>=n||96<=n&&105>=n)return'Number';if(229==n)return'Android'}else if(9==n)return'Shift+Tab';return''}},{key:'GoToPrevious',value:function(){this.PreviousPart&&this.PreviousPart.Element&&this.PreviousPart.Element.focus()}},{key:'GoToNext',value:function(){this.NextPart&&this.NextPart.Element&&this.NextPart.Element.focus()}},{key:'IsEmpty',value:function(){return!this.Element.value||''==this.Element.value}},{key:'IsAtBegginingOfInput',value:function(){return 0==this.Element.selectionEnd}},{key:'IsAtEndOfInput',value:function(){return this.Element.value.length==this.Element.selectionEnd}},{key:'IsComplete',value:function(){return this.Element.value.length>=this.MaxLength}},{key:'IsValueHighlighted',value:function(){var m='';return window.getSelection?m=window.getSelection().toString():document.selection&&'Control'!=document.selection.type&&(m=document.selection.createRange().text),m==this.Element.value}},{key:'TrimToMaxLength',value:function(){var m=this.Element.value,n=m.substring(0,this.MaxLength);this.Element.value=n}},{key:'Clear',value:function(){this.Element.value='',this.UpdateWidth()}},{key:'KeyDown',value:function(){this.JustGainedFocus=!1}},{key:'KeyUp',value:function(){this.TrimToMaxLength(),this.Parent.UpdateHiddenInputWithFormattedValue?this.Parent.UpdateHiddenInputWithFormattedValue():this.Parent.UpdateHiddenInputWithRawValue()}}]),i}(IntakePartBase),NumberIntakeInput=function(e){function i(l,m,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,i);var p=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,l,m,n,'number',null));return p.Element.min=0,p.Element.pattern='[0-9]*',p.Element.setAttribute('inputmode','numeric'),p.Element.value=o,p}return _inherits(i,e),_createClass(i,[{key:'KeyDown',value:function(m){switch(_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'KeyDown',this).call(this,m),this.KeyTypeFromEvent(m)){case'Shift+Tab':this.PreviousPart&&(this.GoToPrevious(),m.preventDefault());break;case'UpArrow':case'DownArrow':m.preventDefault();break;case'Tab':this.NextPart&&(this.GoToNext(),m.preventDefault());break;case'LeftArrow':this.PreviousPart&&(this.IsEmpty()||this.IsAtBegginingOfInput())&&(this.GoToPrevious(),m.preventDefault());break;case'RightArrow':this.NextPart&&(this.IsEmpty()||this.IsAtEndOfInput())&&(this.GoToNext(),m.preventDefault());break;case'Delete':break;case'Backspace':this.IsEmpty()&&this.GoToPrevious();break;case'Number':this.IsComplete()&&!this.IsValueHighlighted()&&m.preventDefault();break;default:m.preventDefault();}}},{key:'KeyUp',value:function(m){switch(this.KeyTypeFromEvent(m)){case'Shift+Tab':case'LeftArrow':case'Tab':case'RightArrow':break;case'Backspace':this.IsEmpty()&&this.UpdateWidth();break;case'Android':case'Number':this.IsComplete()&&!this.IsValueHighlighted()&&(!this.JustGainedFocus&&this.GoToNext(),m.preventDefault());}_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'KeyUp',this).call(this,m)}}]),i}(IntakeInput),TextIntakeInput=function(e){function i(l,m,n){return _classCallCheck(this,i),_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,l,m,n,'text',null))}return _inherits(i,e),_createClass(i,[{key:'KeyDown',value:function(m){switch(_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'KeyDown',this).call(this,m),this.KeyTypeFromEvent(m)){case'Shift+Tab':this.PreviousPart&&(this.GoToPrevious(),m.preventDefault());break;case'UpArrow':case'DownArrow':m.preventDefault();break;case'Tab':this.NextPart&&(this.GoToNext(),m.preventDefault());break;case'LeftArrow':this.PreviousPart&&(this.IsEmpty()||this.IsAtBegginingOfInput())&&(this.GoToPrevious(),m.preventDefault());break;case'RightArrow':this.NextPart&&(this.IsEmpty()||this.IsAtEndOfInput())&&(this.GoToNext(),m.preventDefault());break;case'Delete':break;case'Backspace':this.IsEmpty()&&this.GoToPrevious();break;default:this.IsComplete()&&!this.IsValueHighlighted()&&m.preventDefault();}}},{key:'KeyUp',value:function(m){switch(this.KeyTypeFromEvent(m)){case'Shift+Tab':case'LeftArrow':case'Tab':case'RightArrow':case'Backspace':break;default:this.IsComplete()&&!this.IsValueHighlighted()&&(!this.JustGainedFocus&&this.GoToNext(),m.preventDefault());}_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'KeyUp',this).call(this,m)}}]),i}(IntakeInput),IntakeDivider=function(e){function i(l,m){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,l,m.length,'p'));return n.Element.className='Intake-Part',n.Element.innerText=m,n}return _inherits(i,e),_createClass(i,[{key:'UpdateWidth',value:function(){this.Element.style.width=7.2*this.MaxLength+'px'}}]),i}(IntakePartBase);